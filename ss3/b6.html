<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>
        let totalFeedback = 0;

        let severeComplaint = 0;
        let mediumComplaint = 0;
        let lightComplaint = 0;
        let improvementCount = 0;
        let positiveCount = 0;

        while (true) {
            let choice = prompt("Có khiếu nại/phản hồi mới từ bạn đọc không? (có/không)");

            if (choice === null) break;

            choice = choice.toLowerCase();

            if (choice === "không") {
                console.log("===== BÁO CÁO CUỐI CA =====");
                console.log("Tổng số phản hồi/khiếu nại đã xử lý:", totalFeedback);
                console.log("Số khiếu nại nghiêm trọng (mức 3):", severeComplaint);
                console.log("Số khiếu nại trung bình (mức 2):", mediumComplaint);
                console.log("Số khiếu nại nhẹ (mức 1):", lightComplaint);
                console.log("Số đề xuất cải thiện:", improvementCount);
                console.log("Số phản hồi tích cực:", positiveCount);
                break;
            }

            if (choice === "có") {
                totalFeedback++;

                let readerName;
                do {
                    readerName = prompt("Nhập tên bạn đọc (không được để trống):");
                } while (!readerName || readerName.trim() === "");

                let readerCode = prompt("Nhập mã thẻ bạn đọc (có thể để trống):");

                let type;
                do {
                    type = parseInt(
                        prompt(
                            "Nhập loại phản hồi:\n1 - Phàn nàn/Khiếu nại\n2 - Đề xuất cải thiện\n3 - Phản hồi tích cực"
                        )
                    );
                } while (type !== 1 && type !== 2 && type !== 3);

                let severity = null;

                if (type === 1) {
                    do {
                        severity = parseInt(
                            prompt(
                                "Nhập mức độ nghiêm trọng:\n1 - Nhẹ\n2 - Trung bình\n3 - Nghiêm trọng"
                            )
                        );
                    } while (severity !== 1 && severity !== 2 && severity !== 3);
                }

                let content = prompt("Nhập nội dung ngắn gọn (tham khảo):");

                if (type === 1 && severity === 3) {
                    console.log("→ Chuyển ngay lãnh đạo - Khiếu nại nghiêm trọng");
                    severeComplaint++;
                }
                else if (type === 1 && severity === 2) {
                    console.log("→ Ghi nhận, sẽ xử lý trong ngày - Khiếu nại trung bình");
                    mediumComplaint++;
                }
                else if (type === 1 && severity === 1) {
                    console.log("→ Xử lý ngay tại quầy - Khiếu nại nhẹ");
                    lightComplaint++;
                }
                else if (type === 2) {
                    console.log("→ Cảm ơn! Đề xuất đã được ghi nhận");
                    improvementCount++;
                }
                else if (type === 3) {
                    console.log("→ Cảm ơn bạn đã phản hồi tích cực!");
                    positiveCount++;
                }
            } else {
                console.log("Vui lòng nhập 'có' hoặc 'không'.");
            }
        }

    </script>
</body>

</html>